{
	"variables"       : 
	{
		"ATLAS_NAME"            : "SonarQube",
		"ATLAS_TOKEN"           : "{{env `ATLAS_TOKEN`}}",
		"ATLAS_USERNAME"        : "{{env `ATLAS_USERNAME`}}",
		"AWS_ACCESS_KEY_ID"     : "{{env `AWS_ACCESS_KEY_ID`}}",
		"AWS_SECRET_ACCESS_KEY" : "{{env `AWS_SECRET_ACCESS_KEY`}}"
	},                             
                                               
	"builders"        :     
	[                             
	{                                       
		"type"                  : "amazon-ebs",
		"region"                : "us-east-1",
		"ami_name"              : "SonarQube {{timestamp}}",
		"access_key"            : "{{ user `AWS_ACCESS_KEY_ID` }}",
		"secret_key"            : "{{ user `AWS_SECRET_ACCESS_KEY` }}",
		"source_ami"            : "ami-10b68a78",
		"ssh_timeout"           : "10m",
		"ssh_username"          : "ubuntu",
		"instance_type"         : "c3.large"
	}

	],                              
                                          
	"provisioners"    :   
	[           
	{                            
		"type"                  : "shell",
		"execute_command"       : "echo 'packer' | {{ .Vars }} sudo -E -S sh '{{ .Path }}'",
		"scripts"               : ["scripts/programs.sh"]
	}

	],                        
                             
	"post-processors" : 
	[                  
                             
	{
		"type"                  : "atlas",
		"artifact"              : "{{user `ATLAS_USERNAME`}}/{{user `ATLAS_NAME`}}",
		"artifact_type"         : "amazon.ami",
		"metadata"              : {"created_at": "{{timestamp}}"}
	}                              
                                        
	],                                   
                                       
	"push"           :
	{
		"name"                  : "{{user `ATLAS_USERNAME`}}/{{user `ATLAS_NAME`}}",
		"vcs"                   : false
	}          
}